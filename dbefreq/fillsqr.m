function rgb = fillsqr(x,y,dx,dy,fcol,bcol)%Function RGB = fillsqr(X,Y,dX,dY,Fcol,Bcol)%  Plots an array of filled rectangles of dimensions [dX,dY] at positions [X,Y].%  If dimension(dX) == 1, all rectangles are given the same dimensions.%  Fcol and Bcol specify the fill color and border color, respectively.%  FILLSQR with a single argument, FILLSQR(pallette), gives a matrix %  with the colors corresponding to the specified pallette (3-column matrix).%  Possible pallettes include: HSV, GRAY. The displayed colors will be output%  as an optional matrix of R-G-B triplets, <RGB>. %%  Brief form: fillsqr(pallette) - plots a simple color matrix of 'pallette'if nargin ==1;	fcol = x; bcol=ones(size(x)); clear x	dim = sqrt(length(fcol(:,1))); 	for k=1:dim; for j=1:dim; x(dim*(k-1)+j)=k; y(dim*(k-1)+j)=j; end; end	dx=1; dy=1;endn=length(x);if length(dx) < n; dx = dx(1)*ones(n,1); dy = dy(1)*ones(n,1); endfor k=1:n	xpos = [x(k)-dx(k)/2,x(k)-dx(k)/2,x(k)+dx(k)/2,x(k)+dx(k)/2,x(k)-dx(k)/2];	ypos = [y(k)-dy(k)/2,y(k)+dy(k)/2,y(k)+dy(k)/2,y(k)-dy(k)/2,y(k)-dy(k)/2];	fill(xpos,ypos,fcol(k,:));hold on	plot(xpos,ypos,'color',bcol(k,:));	text(x(k)-.1,y(k),int2str(k))endhold offif nargin ==1	set(gca,'xlim',[0,dim+1],'ylim',[0,dim+1],'xtick',[1:dim],'ytick',[1:dim])endrgb = fcol;